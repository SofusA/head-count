<!DOCTYPE html>
<html>

<head>
  <title>Counter status</title>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.22.6/dist/umd/supabase.min.js"></script>

  <!-- Boostrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

  <!-- Luxon -->
  <script src="https://cdn.jsdelivr.net/npm/luxon"></script>
</head>

<body class='bg-light container py-4'>
  <header class='pb-3 mb-4 border-bottom'>
    <span class='fs-4'>Visitor Counter System Status</span><br />
    <span>by Iot-Lab</span>
  </header>

  <div class='px-md-5'>
    <h3>Subscribe test</h3>

  </div>


  <script>

    const supabaseUrl = 'https://flpcdxxaexyriudizhty.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNjQyNzkyOCwiZXhwIjoxOTQyMDAzOTI4fQ.XoT5qhcfNYapF_rDJxzokPX9eOGCB0hzBW5crHvcnoA'
    const db = supabase.createClient(supabaseUrl, supabaseKey)

    const sensor = db
      .from('counter')
      .on('*', payload => {
        console.log('Change received!', payload)
      })
      .subscribe()

  </script>
</body>

</html>